import{a as N,b as c,c as P,d as A,e as T,f as G,g as I,h as q,i as D,j as R,k as j}from"./chunk-ZOHC5V4B.js";import{l as M}from"./chunk-FYHPVT6G.js";import{a as V}from"./chunk-6QT3SCWV.js";import{p as C,q as E}from"./chunk-DBNDSLTA.js";import"./chunk-WXWXYMIB.js";import"./chunk-DME4QOYU.js";import{Bb as F,Eb as y,Gb as k,Oa as n,Pb as x,Qb as s,Sb as L,W as u,Wb as _,Za as S,aa as h,ba as b,nb as w,ob as v,sb as m,tb as a,ub as o,vb as g}from"./chunk-OJ534RAZ.js";import"./chunk-4CLCTAJ7.js";var $=(r,t,i,e)=>({"bg-red-50":r,border:t,"border-red-500":i,"text-red-900":e}),z=(r,t,i,e)=>({"bg-red-50":r,border:t,"border-red-500":i,"text-red-900":e});function B(r,t){r&1&&s(0," Login ")}function Z(r,t){r&1&&s(0," loading... ")}function H(r,t){if(r&1&&(a(0,"div",14),s(1),o()),r&2){let i=k();n(),L(" ",i.errorMsge," ")}}var O=class r{errorMsge="";authForm;isLoading=!1;isShowPassword=!0;AuthServices=u(V);router=u(C);fb=u(D);toastr=u(M);formInit(){this.authForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]]})}getValues(){this.authForm.valid?(this.isLoading=!0,console.log(this.authForm.value),this.AuthServices.login(this.authForm.value).subscribe({next:t=>{t.message=="success"&&(this.AuthServices.saveToken(t.token),this.router.navigate(["/home"]),this.isLoading=!1,this.toastr.success(t.message))},error:t=>{this.errorMsge=t.error.message,this.isLoading=!1,this.toastr.error(t.error.message)}})):this.authForm.markAllAsTouched()}showPassword(){this.isShowPassword=!this.isShowPassword}ngOnInit(){this.formInit()}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=S({type:r,selectors:[["app-login"]],decls:24,vars:21,consts:[[1,"max-w-md","mx-auto","my-10","border","border-gray-500","shadow-md","p-5","rounded-2xl"],[1,"font-bold","text-2xl","text-center"],[1,"max-w-md","mx-auto","mt-4",3,"ngSubmit","formGroup"],[1,"mb-6"],[1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","email","type","email","placeholder","ketun@mailinator.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","block","w-full","p-2.5"],[3,"control"],[1,"flex","justify-between","items-center"],["formControlName","password","placeholder","Password","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","block","w-full","p-2.5",3,"type"],[1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","cursor-pointer","p-2.5",3,"click"],[1,"fa-solid","fa-eye-slash"],[1,"flex","justify-between"],[1,"text-white","bg-green-700","hover:bg-green-800","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-green-600","dark:hover:bg-green-700","dark:focus:ring-green-800",3,"disabled"],["routerLink","/register",1,"text-white","bg-green-700","hover:bg-green-800","focus:ring-4","focus:outline-none","focus:ring-green-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-green-600","dark:hover:bg-green-700","dark:focus:ring-green-800"],[1,"bg-yellow-100","border","my-3","border-yellow-400","text-yellow-700","px-4","py-3","rounded","relative"]],template:function(i,e){if(i&1){let l=F();a(0,"div",0)(1,"h1",1),s(2,"LOGIN"),o(),a(3,"form",2),y("ngSubmit",function(){return h(l),b(e.getValues())}),a(4,"div",3)(5,"label",4),s(6,"Email address"),o(),g(7,"input",5)(8,"errors-msg",6),o(),a(9,"div",3)(10,"label",4),s(11,"Password"),o(),a(12,"div",7),g(13,"input",8),a(14,"a",9),y("click",function(){return h(l),b(e.showPassword())}),g(15,"i",10),o()(),g(16,"errors-msg",6),o(),a(17,"div",11)(18,"button",12),w(19,B,1,0)(20,Z,1,0),o(),a(21,"button",13),s(22," Sign in "),o()(),w(23,H,2,1,"div",14),o()()}if(i&2){let l,d;n(3),m("formGroup",e.authForm);let p=((l=e.authForm.get("email"))==null?null:l.touched)&&((l=e.authForm.get("email"))==null?null:l.errors),f=((d=e.authForm.get("password"))==null?null:d.touched)&&((d=e.authForm.get("password"))==null?null:d.errors);n(4),x(_(11,$,p,p,p,p)),n(),m("control",e.authForm.get("email")),n(5),x(_(16,z,f,f,f,f)),m("type",e.isShowPassword?"password":"text"),n(3),m("control",e.authForm.get("password")),n(2),m("disabled",e.isLoading),n(),v(e.isLoading?20:19),n(4),v(e.errorMsge?23:-1)}},dependencies:[R,T,N,P,A,q,G,I,j,E],encapsulation:2})};export{O as Login};
